<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Machtls Touring Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Mapbox GL JS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.5.0/mapbox-gl.css" rel="stylesheet" />

  <!-- Your styles -->
  <link rel="stylesheet" href="./css/base.css" />
  <link rel="stylesheet" href="./css/hero.css" />
  <link rel="stylesheet" href="./css/book.css" />
  <link rel="stylesheet" href="./css/map.css" />

  <style>
    main { display: block; }

    #map-section { padding: 0 18px 18px; }

    /* map panel look consistent with your “card” style */
    .mapwrap{
      border: 1px solid var(--border);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      background: rgba(255,255,255,0.06);
    }

    #map{
      width: 100%;
      height: 520px;
    }

    @media (max-width: 900px){
      #map{ height: 380px; }
    }
  </style>
</head>

<body>
  <!-- Cover-page hero -->
  <section class="hero hero--guide" aria-label="Guidebook intro">
    <div class="hero-media">
      <img src="./assets/cover.jpg" alt="Touring Guide Cover">
    </div>

    <div class="hero-inner">
      <div class="hero-badge">
        <span class="dot"></span>
        <span>Ski Touring Guide</span>
        <span class="sep">•</span>
        <span>Winter 2025/26</span>
      </div>

      <h2 class="hero-title">Ski Touring Guide</h2>

      <p class="hero-sub">
        This map-linked ski touring guide brings together GPX tracks, photos, and practical notes in one place.
        These routes reflect personal experiences and are not guaranteed to represent the best or safest approach
        under all conditions.
        <br><br>
        <b>Always assess current local conditions and consult the avalanche forecast before heading out.</b>
      </p>

      <div class="hero-cta">
        <button class="hero-btn" id="ctaMap" type="button">Jump to map</button>
      </div>
    </div>
  </section>

  <!-- Header / filters -->
  <header>
    <div class="topbar">
      <div class="brand">
        <h1>Ski Touring Guide</h1>
        <p>Filter tours • click the map • open tours in a new tab</p>
      </div>

      <div class="controls">
        <input id="q" placeholder="Search title / region…" />
        <select id="province"><option value="">All provinces</option></select>
        <select id="region"><option value="">All regions</option></select>
        <button id="fit" type="button">Fit map to results</button>
      </div>
    </div>
  </header>

  <!-- Map only -->
  <main>
    <section class="mapwrap" id="map-section">
      <div id="map"></div>
    </section>
  </main>

  <!-- Token -->
  <script src="./js/mapbox_token.js"></script>

  <!-- Mapbox GL JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.5.0/mapbox-gl.js"></script>

  <!-- Mapbox-based logic -->
  <script src="./js/main_mapbox.js"></script>

  <!-- Scroll helper -->
  <script>
    document.getElementById("ctaMap")?.addEventListener("click", () => {
      document.getElementById("map-section")?.scrollIntoView({ behavior: "smooth", block: "start" });
      // let the map script resize itself after scroll
      setTimeout(() => window.dispatchEvent(new Event("map:resize")), 350);
    });
  </script>
</body>
</html>
